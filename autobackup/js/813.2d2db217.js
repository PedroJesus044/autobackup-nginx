"use strict";(self["webpackChunkfrontend_controladora_js"]=self["webpackChunkfrontend_controladora_js"]||[]).push([[813],{5813:function(e,s,t){t.r(s),t.d(s,{default:function(){return f}});var a=t(641),o=t(3751);const r={class:"row"},n={class:"mx-auto col-sm-3"},l={class:"form-group"},i=(0,a.Lk)("label",{for:"exampleInputEmail1"},"Username",-1),u=(0,a.Lk)("small",{id:"emailHelp",class:"form-text text-muted"},"We'll never share your data with anyone else.",-1),d={class:"form-group"},m=(0,a.Lk)("label",{for:"exampleInputPassword1"},"Password",-1);function p(e,s,t,p,c,g){return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",n,[(0,a.Lk)("div",l,[i,(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>c.email=e),"aria-describedby":"emailHelp",placeholder:"Enter username"},null,512),[[o.Jo,c.email]]),u]),(0,a.Lk)("div",d,[m,(0,a.bo)((0,a.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>c.password=e),placeholder:"Password",onKeyup:s[2]||(s[2]=(0,o.jR)(((...e)=>g.login&&g.login(...e)),["enter"]))},null,544),[[o.Jo,c.password]])]),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:s[3]||(s[3]=(...e)=>g.login&&g.login(...e))},"Login")])])}t(4114);var c=t(4753);class g{getAll(){return c.A.get("/backups")}get(e){return c.A.get(`/backups/${e}`)}create(e){return c.A.post("/backups",e)}update(e,s){return c.A.put(`/backups/${e}`,s)}delete(e){return c.A.delete(`/backups/${e}`)}deleteAll(){return c.A.delete("/tutorials")}login(e){return c.A.post("/sessions/login",e)}}var h=new g,k={name:"login-screen",data(){return{email:"",password:""}},methods:{async login(){var e={email:this.email,password:this.password};await h.login(e).then((e=>{200===e.status&&"username"in e.data&&(console.log(e.data),sessionStorage.setItem("token","fewuoibfeiwbslwl"),sessionStorage.setItem("role",e.data.role),sessionStorage.setItem("username",e.data.username),this.$router.push("/backups"))})).catch((e=>{console.log(e)}))},validateSession(){this.token=!!sessionStorage.getItem("token"),this.isAdmin="dashboard"===sessionStorage.getItem("role"),this.username=sessionStorage.getItem("username")}},mounted(){this.validateSession(),this.timer=setInterval((()=>{this.validateSession()}),300),this.token&&this.$router.push("/dashboard")}},b=t(6262);const w=(0,b.A)(k,[["render",p]]);var f=w}}]);
//# sourceMappingURL=813.2d2db217.js.map